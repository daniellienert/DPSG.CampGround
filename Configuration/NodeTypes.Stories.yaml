##
# Document NodeType "StoryList"
#

'DPSG.CampGround:StoryList':
  superTypes:
    'Neos.Neos:Document': true
  constraints:
    nodeTypes:
      'DPSG.CampGround:Story': true
      '*': false
  childNodes:
    main:
      type: 'Neos.Neos:ContentCollection'
  ui:
    label: 'Story List'
    icon: icon-list-alt
  properties:
    sourceNode:
      type: reference
      ui:
        label: 'Liste an Eintr√§gen'
        reloadIfChanged: true
        inspector:
          group: document
'DPSG.CampGround:Story':
  superTypes:
    'Neos.Neos:Document': true
  childNodes:
    main:
      type: 'Neos.Neos:ContentCollection'
  ui:
    label: Bericht
    icon: icon-calendar
    inspector:
      groups:
        storyProperties:
          label: Eigenschaften
          position: 1
  properties:
    title:
      type: string
      ui:
        inlineEditable: true
        inspector:
          group: null
    storyStartDate:
      type: DateTime
      ui:
        reloadIfChanged: false
        label: Startdatum
        inspector:
          group: storyProperties
    storyEndDate:
      type: DateTime
      ui:
        reloadIfChanged: false
        label: Enddatum
        inspector:
          group: storyProperties
    group:
      type: references
      ui:
        reloadIfChanged: true
        label: Stufe
        inspector:
          group: storyProperties
          editorOptions:
            nodeTypes:
              - 'DPSG.CampGround:Stufe'
    author:
      type: string
      ui:
        reloadIfChanged: false
        label: Autor
        inspector:
          group: 'storyProperties'

    'storyHeaderImage':
      type: 'Neos\Media\Domain\Model\ImageInterface'
      ui:
        label: Artikelbild
        reloadIfChanged: true
        inspector:
          group: storyProperties
      search:
        elasticSearchMapping:
          type: string
          include_in_all: false
        indexing: '${(node.properties.storyHeaderImage ? "set" : "missing")}'
'DPSG.CampGround:StorySlider':
  superTypes:
    'Neos.Neos:Content': true
  ui:
    label: 'Artikel Slider'
    inspector:
      groups:
        stories:
          label: Artikel
          position: 10
  properties:
    numberOfArticles:
      type: integer
      validation:
        Neos.Neos/Validation/NotEmptyValidator: {  }
        Neos.Neos/Validation/IntegerValidator: {  }
      ui:
        label: 'Anzahl Artikel'
        reloadIfChanged: true
        inspector:
          group: stories
'DPSG.CampGround:LatestStories':
  superTypes:
    'Neos.Neos:Content': true
  ui:
    label: 'Aktuelle Berichte'
    inspector:
      groups:
        latestStories:
          label: 'Aktuelle Berichte'
          position: 1
  properties:
    numberOfArticles:
      type: integer
      validation:
        Neos.Neos/Validation/NotEmptyValidator: {  }
        Neos.Neos/Validation/IntegerValidator: {  }
      ui:
        label: 'Anzahl Berichte'
        reloadIfChanged: true
        inspector:
          group: latestStories
